
# The migration file

class CreateC <ActiveRecord::Migrations
create_table :c, :force => true do |t|
t.references :a
t.references :b

end
end

# Modal B
class B < ActiveRecord::Base
   has_and_belongs_to_many :as
end

Go to the rails console and make sure a.bs pops up when you hit tab.

# the seeds file
A.all.each do |a|
B.all.each { |b| a.bs << b }
end

# Finally in Modal A
class A < ActiveRecord::Base
       after_save :update_c

private 
def update_c
B.all.each { |b| self.bs << b }
end
end
