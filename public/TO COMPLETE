
TO COMPLETE:

1. Drop Down Populate. -- :semester_id and :branch_id null

2. Validation on create schedule. -- room and professor and time

3. Repeat events daily for a time range. --Good God Only Knows

4. Notify students on change by professor in schedule. --via mail mostly

5. Delete on hover. --repeated delete requests, and icon show on initial fetch

6. User specific accessiblity. --roles not working


http://vysakh0.github.io/complex-dynamic-forms-in-rails/

<%= image_tag("http://upload.wikimedia.org/wikipedia/en/thumb/f/fb/Yellow_icon.svg/1024px-Yellow_icon.svg.png")%>














#To create password token 
  def create_token(user_email)
    begin
      raw_data = user_email + Time.now.to_s + SecureRandom.hex.to_s
      token = Digest::MD5.hexdigest(raw_data)
    end while User.find_by(:first_login_token => token) != nil
    token
  end




  def show
    if current_user.role.name == "professor"
      @data=Schedule.find_all_by_user_id(current_user.id)
      @data.each do |d|
        d.name= d.subject.name+" for "+d.batch.name+" in "+d.room.name  #FULCALENDAR TITLE FOR PROFESSOR
        d.save!
      end
    else
      @data=Schedule.find_all_by_batch_id(current_user.batch_id)
      @data.each do |d|
        d.name= d.subject.name+" by "+d.user.name+" in "+d.room.name  #FULCALENDAR TITLE FOR STUDENT
        d.save!
      end
    end
    respond_to do |format|  
      format.html # index.html.erb  
      format.json { render :json => @data }  
   end 
  end
